(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{285:function(t,s,a){t.exports=a.p+"assets/img/frame.94d12de7.png"},286:function(t,s){t.exports="data:image/png;base64,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"},314:function(t,s,a){"use strict";a.r(s);var n=a(11),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("custom-header"),t._v(" "),s("p",[t._v("这个知识点是 React Fiber 发扬出来的，做一个大致的了解。")]),t._v(" "),s("p",[t._v("页面是一帧一帧的绘制出来，当每秒绘制的帧数（FPS）达到 60 时，页面是流畅的，小于这个值时，用户会感觉到卡顿。1s 60 帧，所以每一帧分到的时间是 1000/60 ≈ 16 ms。")]),t._v(" "),s("h2",{attrs:{id:"浏览器每一帧都做了哪些事情呢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#浏览器每一帧都做了哪些事情呢"}},[t._v("#")]),t._v(" 浏览器每一帧都做了哪些事情呢？")]),t._v(" "),s("p",[s("img",{attrs:{src:a(285),alt:"frame"}})]),t._v(" "),s("p",[t._v("从上图，我们可以分析，一帧内（16ms）做了什么事情？")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("一帧内做了什么事情")]),t._v(" "),s("ol",[s("li",[t._v("处理用户的交互")]),t._v(" "),s("li",[t._v("JS 的解析和执行")]),t._v(" "),s("li",[t._v("帧的开始，处理页面尺寸的变化，滚动事件，媒体查询，动画事件。")]),t._v(" "),s("li",[t._v("处理"),s("code",[t._v("requestAnimationFrame")]),t._v("和"),s("code",[t._v("IntersectionObserver")]),t._v("的回调函数。")]),t._v(" "),s("li",[t._v("布局（重新计算样式，更新布局，处理"),s("code",[t._v("ResizeObserver")]),t._v("的回调函数）。")]),t._v(" "),s("li",[t._v("绘制页面")])])]),t._v(" "),s("h2",{attrs:{id:"requestidlecallback"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestidlecallback"}},[t._v("#")]),t._v(" requestIdleCallback")]),t._v(" "),s("p",[t._v("如果上面的 6 个步骤完成过后没超过 16ms，说明还有浏览器还有空闲时间，这时浏览器就会去执行"),s("code",[t._v("requestIdleCallback")]),t._v("的回调函数。")]),t._v(" "),s("p",[t._v("到目前为止，可以做一个初步的了解。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("提示")]),t._v(" "),s("p",[s("code",[t._v("requestAnimationFrame")]),t._v("是每一帧都会执行。")]),t._v(" "),s("p",[s("code",[t._v("requestIdleCallback")]),t._v("是浏览器有空闲时间才会执行。")]),t._v(" "),s("p",[t._v("（如果浏览器一直处于忙碌状态，那么"),s("code",[t._v("requestIdleCallback")]),t._v("的回调永远不会执行，可以通过设置"),s("code",[t._v("timeout")]),t._v("参数来保证运行。）")])]),t._v(" "),s("h3",{attrs:{id:"requestidlecallback-基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestidlecallback-基本使用"}},[t._v("#")]),t._v(" requestIdleCallback 基本使用")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestIdleCallback",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN 介绍"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" taskQueue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"任务1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"任务2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"任务3"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"任务4"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 向浏览器申请空闲时间，用来执行wookloop，")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果没有空闲时间，此时会等待指定的 timeout 那么久再执行")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wookloop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("timeout")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wookloop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deadline")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deadline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 帧内还有空闲时间，或者超时了且任务队列中还有任务，就要执行任务了")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deadline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" deadline"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("didTimeout"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v("\n    taskQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" currentWork "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" taskQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取出任务")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("currentWork")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行任务")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   如果任务队列中还有任务， 那么接着向浏览器申请下一帧的空闲时间")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("taskQueue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("wookloop"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("img",{attrs:{src:a(286),alt:"1675234864484"}})]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("分析")]),t._v(" "),s("p",[t._v("分两种情况：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("没有超时，说明浏览器不忙，有空闲时间用来执行 wookloop")])]),t._v(" "),s("li",[s("p",[t._v("超时了，浏览器一直处于忙碌状态，那么"),s("code",[t._v("requestIdleCallback")]),t._v("的回调会等待指定的 "),s("code",[t._v("timeout")]),t._v(" 那么久再执行 （如果超时状态还选择继续执行的话，肯定会出现卡顿，因为会将一帧的时间拉长。）")])])])]),t._v(" "),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),s("p",[t._v("一些低优先级的任务可使用 "),s("code",[t._v("requestIdleCallback")]),t._v(" 等浏览器不忙的时候来执行，同时因为时间有限，它所执行的任务应该尽量是能够量化，细分的微任务（micro task）。（有时间但是不多，这时执行的回调函数功能很大，导致执行时间很长，就会将一帧拉的很长，导致卡顿。）")]),t._v(" "),s("div",{staticClass:"custom-block danger"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("因为它发生在一帧的最后，此时页面布局已经完成，"),s("strong",[t._v("所以不建议在 "),s("code",[t._v("requestIdleCallback")]),t._v(" 里再操作 DOM")]),t._v("，这样会导致页面再次重绘。")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("DOM 操作建议在 rAF 中进行")]),t._v("。同时，操作 DOM 所需要的耗时是不确定的，因为会导致重新计算布局和视图的绘制，所以这类操作不具备可预测性。")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Promise")]),t._v(" 也不建议在这里面进行，因为 Promise 的回调属性 Event loop 中优先级较高的一种微任务，会在 "),s("code",[t._v("requestIdleCallback")]),t._v(" 结束时立即执行，不管此时是否还有富余的时间，这样有很大可能会让一帧超过 16 ms。")])])])]),t._v(" "),s("h2",{attrs:{id:"requestanimationframe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe"}},[t._v("#")]),t._v(" requestAnimationFrame")]),t._v(" "),s("p",[t._v("在没有 "),s("code",[t._v("requestAnimationFrame")]),t._v(" 方法的时候，执行动画，我们可能使用 "),s("code",[t._v("setTimeout")]),t._v(" 或 "),s("code",[t._v("setInterval")]),t._v(" 定时器来实现动画；但是用定时器会出现一种问题，它的回调函数执行的时间是不固定的，可能刚好就在末尾，或者直接就不执行了，经常会引起丢帧而导致页面卡顿。")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("个人理解")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("刚好在末尾执行，那么导致这一帧时间拉的很长，导致卡顿；（某一帧执行时间长，那么 1s 渲染的帧数就小于 60 帧，因此就感觉卡顿）")])]),t._v(" "),s("li",[s("p",[t._v("不执行，例如在动画中定时器回调没有执行，导致这一帧没有变化（丢帧）；")])])])]),t._v(" "),s("p",[s("code",[t._v("setTimeout")]),t._v(" 或 "),s("code",[t._v("setInterval")]),t._v(" 的回调函数要先等同步代码执行完毕，异步队列中没有其他任务，才会轮到自己执行。并且，我们知道每一次重新渲染的最佳时间大约是 16.6 ms，如果定时器的时间间隔过短，就会造成过度渲染，增加开销；过长又会延迟渲染，使动画不流畅。")]),t._v(" "),s("p",[s("code",[t._v("requestAnimationFrame")]),t._v(" 方法不同与 "),s("code",[t._v("setTimeout")]),t._v(" 或 "),s("code",[t._v("setInterval")]),t._v("，它是由系统来决定回调函数的执行时机的，会请求浏览器在下一次重新渲染之前执行回调函数。无论设备的刷新率是多少，"),s("strong",[s("code",[t._v("requestAnimationFrame")]),t._v(" 的时间间隔都会紧跟屏幕刷新一次所需要的时间")]),t._v("；")]),t._v(" "),s("p",[t._v("例如某一设备的刷新率是 75 Hz，那这时的时间间隔就是 13.3 ms（1 秒 / 75 次）。需要注意的是这个方法虽然能够"),s("strong",[t._v("保证回调函数在每一帧内只渲染一次")]),t._v("，但是"),s("strong",[t._v("如果这一帧有太多任务执行，还是会造成卡顿的；因此它只能保证重新渲染的时间间隔最短是屏幕的刷新时间。")])]),t._v(" "),s("h3",{attrs:{id:"requestanimationframe-基本使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#requestanimationframe-基本使用"}},[t._v("#")]),t._v(" requestAnimationFrame 基本使用")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN 介绍"),s("OutboundLink")],1)]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token doctype"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<!")]),s("span",{pre:!0,attrs:{class:"token doctype-tag"}},[t._v("DOCTYPE")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token name"}},[t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("html")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("lang")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("en"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("charset")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("http-equiv")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("X-UA-Compatible"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("IE=edge"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("meta")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("viewport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("width=device-width, initial-scale=1.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("Document"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("title")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token style"}},[s("span",{pre:!0,attrs:{class:"token language-css"}},[t._v("\n      "),s("span",{pre:!0,attrs:{class:"token selector"}},[t._v(".box")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("height")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 100px"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v("background")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" plum"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("style")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}},[s("span",{pre:!0,attrs:{class:"token language-javascript"}},[t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" animationId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" box "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("querySelector")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('".box"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("animationId"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          box"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transform "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("translateX(")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("left"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("px)")]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n          animationId "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("run"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    ")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("html")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("hr"),t._v(" "),s("p",[s("a",{attrs:{href:"https://juejin.cn/post/6844903848981577735",target:"_blank",rel:"noopener noreferrer"}},[t._v("原文地址"),s("OutboundLink")],1)])],1)}),[],!1,null,null,null);s.default=e.exports}}]);